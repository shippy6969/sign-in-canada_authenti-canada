<!DOCTYPE html>
<html class="no-js" lang="fr" dir="ltr">
  
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
		  wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
  <title>Collection automatique de l’identificateur par paire</title>
  <meta content="width=device-width,initial-scale=1" name="viewport">
  <!-- Meta data -->
  <meta name="description" content="Authenti-Canada.">
  <!-- Meta data-->
  <!--[if gte IE 9 | !IE ]><!-->
  <link href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/assets/favicon.ico" rel="icon" type="image/x-icon">
  <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/css/theme.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="/sign-in-canada_authenti-canada/assets/style.css">
  <!--<![endif]-->
  <!--[if lt IE 9]>
  <link href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/assets/favicon.ico" rel="shortcut icon" />
  <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/css/ie8-theme.min.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/js/ie8-wet-boew.min.js"></script>
	<![endif]-->
  <!--[if lte IE 9]> <![endif]-->
  <noscript><link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/css/noscript.min.css"></noscript>
</head>
<body vocab="http://schema.org/" typeof="WebPage" class="page-discover-auto-collection">
<ul id="wb-tphp">
  <li class="wb-slc"><a class="wb-sl" href="#wb-cont">Passer au contenu principal</a></li>
  <li class="wb-slc visible-sm visible-md visible-lg"><a class="wb-sl" href="#wb-info">Passer à « À propos de ce site »</a></li>
</ul>

<header>
  <div id="wb-bnr" class="container">
    <section id="wb-lng" class="visible-md visible-lg text-right">
      <h2 class="wb-inv">Sélection de la langue</h2>
      <div class="row">
        <div class="col-md-12">
          <ul class="list-inline margin-bottom-none">
            <li><a lang="en" hreflang="en" href="/sign-in-canada_authenti-canada/en/discover/auto-collection.html">English</a></li>
          </ul>
        </div>
      </div>
    </section>

    <div class="row">
      <div class="brand col-xs-8 col-sm-9 col-md-6">
        <a href="https://www.canada.ca/fr.html">
          <img src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/assets/sig-blk-fr.svg" alt="Government of Canada / Gouvernement du Canada">
          <span class="wb-inv"> Government of Canada / <span lang="fr">Gouvernement du Canada</span></span>
        </a>
      </div>

      <section class="wb-mb-links col-xs-4 col-sm-3 visible-sm visible-xs" id="wb-glb-mn">
        <h2>Menus</h2>
        <ul class="list-inline text-right chvrn">
          <li><a href="#mb-pnl" title="Menus" aria-controls="mb-pnl" class="overlay-lnk" role="button"><span class="glyphicon glyphicon-th-list"><span class="wb-inv">Menus</span></span></a></li>
        </ul>
        <div id="mb-pnl"></div>
      </section>
    </div>
  </div>

  <nav class="gcweb-menu" typeof="SiteNavigationElement">
    <div class="container nvbar">
      <h2 class="wb-inv">Menu</h2>
      <button type="button" aria-haspopup="true" aria-expanded="false"><span class="wb-inv">Main </span>Menu <span class="expicon glyphicon glyphicon-chevron-down"></span></button>
      <ul role="menu" aria-orientation="vertical">
        <li role="presentation"><a role="menuitem" href="/sign-in-canada_authenti-canada/fr/decouvrir/index.html">Découvrir</a></li>
        <li role="presentation"><a role="menuitem" href="/sign-in-canada_authenti-canada/fr/evaluer/index.html">Évaluer</a></li>
        <li role="presentation"><a role="menuitem" href="/sign-in-canada_authenti-canada/fr/rejoindre/index.html">Rejoindre</a></li>
        <li role="presentation"><a role="menuitem" href="/sign-in-canada_authenti-canada/fr/contribuer/index.html">Contribuer</a></li>
      </ul>
    </div>
  </nav>
  <nav id="wb-bc" property="breadcrumb">
    <h2>Vous êtes ici:</h2>
    <div class="container">
      <ol class="breadcrumb">
        <li><a href="/sign-in-canada_authenti-canada/fr/index.html">Authenti-Canada</a></li>
<li><a href="/sign-in-canada_authenti-canada/fr/decouvrir/index.html">Découvrir</a></li>
          <li><a href="/sign-in-canada_authenti-canada/fr/decouvrir/auto-collection.html">Collecte automatique d'identifiants par paires</a></li>
</ol>
    </div>
  </nav>
</header>

<main property="mainContentOfPage" class="container">

<h1 id="collection-automatique-de-lidentificateur-par-paire">Collection automatique de l’identificateur par paire</h1>

<p>L’un des principaux objectifs de la plateforme d’acceptation d’Authenti-Canada
est de faciliter le remplacement des anciens systèmes de fournisseurs de
services de justificatifs d’identité, en particulier les anciens systèmes CléGC
et Service de courtier de justificatifs d’identité qui sont utilisés depuis
2011.</p>

<p>L’une des principales conditions préalables à la mise hors service ou au
remplacement de ces anciens systèmes est de déplacer les mappages
d’identificateur par paire actuellement détenus par ces services plus anciens
vers la plateforme d’acceptation, de sorte que les inscriptions des utilisateurs
avec les parties de confiance ne soient pas touchées lorsque les parties de
confiance passent à la plateforme Authenti-Canada.</p>

<p>La plateforme d’acceptation Authenti-Canada met en œuvre une fonctionnalité qui
permet de copier automatiquement les mappages des identifiants par l’utilisateur
au moyen d’une paire à partir d’un service de justificatif d’identité vers la
plateforme d’acceptation la première fois qu’ils sont utilisés. Ils sont ensuite
stockés par la plateforme d’acceptation pour une utilisation future, de sorte
que le mappage stocké par le service de justificatif d’identité n’est plus
nécessaire. Cela réduit les risques et les efforts requis pour déplacer ces
données. Au fil du temps, les données cartographiques des utilisateurs actifs
sont progressivement « recueillies » par la plateforme d’acceptation, ce qui
réduit la nécessité de copier régulièrement les données manuellement au moyen
d’une sorte de « transfert en vrac ».</p>

<h2 id="fonctionnement">Fonctionnement</h2>

<svg class="plantuml" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="519px" preserveaspectratio="none" style="width:820px;height:519px;background:#FFFFFF;" version="1.1" viewbox="0 0 820 519" width="820px" zoomandpan="magnify"><defs><lineargradient id="g10fq3ydcgjknu0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#00FFFF"></stop><stop offset="100%" stop-color="#5F9EA0"></stop></lineargradient></defs><g><rect fill="url(#g10fq3ydcgjknu0)" height="26.2969" id="_title" rx="7.5" ry="7.5" style="stroke:#FF0000;stroke-width:2.0;" width="376" x="223.5" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="366" x="228.5" y="27.9951">Collecte automatique d'un identifiant par paire</text><rect fill="none" height="211.6016" style="stroke:#000000;stroke-width:1.5;" width="619.5" x="194.5" y="220.125"></rect><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="349" x="204.5" y="308.5234"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="79" x2="79" y1="73.5938" y2="483.8594"></line><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="278.5" x2="278.5" y1="73.5938" y2="483.8594"></line><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="606" x2="606" y1="73.5938" y2="483.8594"></line><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="5" y="42.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="134" x="12" y="62.292">Partie de Confiance</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="5" y="482.8594"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="134" x="12" y="502.8545">Partie de Confiance</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="214.5" y="42.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="115" x="221.5" y="62.292">Authenti-Canada</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="214.5" y="482.8594"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="115" x="221.5" y="502.8545">Authenti-Canada</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="532" y="42.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="134" x="539" y="62.292">SAML IDP (FJGC FSI)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="532" y="482.8594"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="134" x="539" y="502.8545">SAML IDP (FJGC FSI)</text><polygon fill="#181818" points="267,100.7266,277,104.7266,267,108.7266,271,104.7266" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="79" x2="273" y1="104.7266" y2="104.7266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="176" x="86" y="99.6606">demande d’authentification</text><polygon fill="#181818" points="594,129.8594,604,133.8594,594,137.8594,598,133.8594" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="600" y1="133.8594" y2="133.8594"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="216" x="286" y="128.7935">demande d’authentification SAML</text><polygon fill="#181818" points="290,141.8594,280,145.8594,290,149.8594,286,145.8594" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="605" y1="145.8594" y2="145.8594"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="303" x="296" y="158.9263">réponse d'authentification avec assertion SAML</text><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="321" y1="192.125" y2="192.125"></line><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="321" y1="192.125" y2="205.125"></line><line style="stroke:#181818;stroke-width:1.0;" x1="280" x2="321" y1="205.125" y2="205.125"></line><polygon fill="#181818" points="290,201.125,280,205.125,290,209.125,286,205.125" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="138" x="286" y="187.0591">recherche l’utilisateur</text><path d="M194.5,220.125 L258.5,220.125 L258.5,227.2578 L248.5,237.2578 L194.5,237.2578 L194.5,220.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="211.6016" style="stroke:#000000;stroke-width:1.5;" width="619.5" x="194.5" y="220.125"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="19" x="209.5" y="233.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacing" textlength="279" x="273.5" y="232.3354">[identifiant par paire demandé introuvable]</text><polygon fill="#181818" points="594,257.3906,604,261.3906,594,265.3906,598,261.3906" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="600" y1="261.3906" y2="261.3906"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="216" x="286" y="256.3247">demande d’authentification SAML</text><path d="M611,242.2578 L611,267.2578 L799,267.2578 L799,252.2578 L789,242.2578 L611,242.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M789,242.2578 L789,252.2578 L799,252.2578 L789,242.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="167" x="617" y="259.3247">pour l'identifiant demandé</text><polygon fill="#181818" points="290,272.3906,280,276.3906,290,280.3906,286,276.3906" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="605" y1="276.3906" y2="276.3906"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="166" x="433" y="289.4575">réponse d'authentification</text><path d="M204.5,308.5234 L268.5,308.5234 L268.5,315.6563 L258.5,325.6563 L204.5,325.6563 L204.5,308.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="349" x="204.5" y="308.5234"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="19" x="219.5" y="321.5903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacing" textlength="265" x="283.5" y="320.7339">[la réponse contient une assertion SAML]</text><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="321" y1="346.7891" y2="346.7891"></line><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="321" y1="346.7891" y2="359.7891"></line><line style="stroke:#181818;stroke-width:1.0;" x1="280" x2="321" y1="359.7891" y2="359.7891"></line><polygon fill="#181818" points="290,355.7891,280,359.7891,290,363.7891,286,359.7891" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="234" x="286" y="341.7231">stocker l'identifiant par paire collecté</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="204.5" x2="553.5" y1="368.7891" y2="368.7891"></line><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacing" textlength="295" x="209.5" y="378.9995">[la réponse ne contient pas d'assertion SAML]</text><line style="stroke:#181818;stroke-width:1.0;" x1="279" x2="321" y1="403.7266" y2="403.7266"></line><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="321" y1="403.7266" y2="416.7266"></line><line style="stroke:#181818;stroke-width:1.0;" x1="280" x2="321" y1="416.7266" y2="416.7266"></line><polygon fill="#181818" points="290,412.7266,280,416.7266,290,420.7266,286,416.7266" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="227" x="286" y="398.6606">créer un nouvel identifiant par paire</text><polygon fill="#181818" points="90,441.7266,80,445.7266,90,449.7266,86,445.7266" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="84" x2="278" y1="445.7266" y2="445.7266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="166" x="106" y="458.7935">réponse d'authentification</text><path d="M284,443.7266 L284,468.7266 L463,468.7266 L463,453.7266 L453,443.7266 L284,443.7266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M453,443.7266 L453,453.7266 L463,453.7266 L453,443.7266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="158" x="290" y="460.7935">avec identifiant par paire</text></g></svg>

<p>La plateforme d’acceptation effectue la collecte automatique des mappages
d’identificateurs par paire dans le cadre du processus normal de connexion
d’utilisateur, en envoyant une deuxième demande d’authentification SAML aux
fournisseurs de services de justificatifs, le cas échéant.</p>

<ol>
  <li>
    <p>Le processus commence lorsqu’une partie de confiance envoie une demande
d’authentification à la plateforme d’acceptation, à l’aide d’OpenID Connect ou
de SAML.</p>
  </li>
  <li>
    <p>La plateforme d’acceptation envoie ensuite une demande d’authentification au
FSI en son propre nom. Elle demande l’identificateur par paire que le FSI a
créée pour Authenti-Canada.</p>
  </li>
  <li>
    <p>À la réception de l’assertion SAML du FSI, la plateforme d’acceptation
recherche l’utilisateur dans son propre référentiel de profils d’utilisateur.</p>
  </li>
  <li>
    <p>La plateforme d’acceptation vérifie ensuite si elle dispose déjà d’un mappage
d’identificateur par paire pour l’utilisateur authentifié avec la partie de
confiance requérante. Dans l’affirmative, la collecte n’est pas requise, le flux
de connexion se termine normalement et la plateforme d’acceptation renvoie
l’identificateur par paire approprié à la partie de confiance (PC).</p>
  </li>
  <li>
    <p>Toutefois, si la plateforme d’acceptation ne possède pas de mappage
d’identificateur par paire pour l’utilisateur authentifié avec la partie de
confiance requérante, elle envoie une deuxième demande d’authentification au FSI
au nom de la partie de confiance.</p>
  </li>
  <li>
    <p>Si le FSI a un identificateur par pair existant pour l’utilisateur avec la PC
requérante, il retourne cet identificateur dans une assertion et la plateforme
Acceptantion l’ajoute à son propre référentiel utilisateur. À ce stade,
l’identificateur a été « collecté » par la plateforme d’acceptation et sera
utilisé chaque fois que l’utilisateur se connectera à cette PC à l’avenir
(conformément à l’étape 4 ci-dessus).</p>
  </li>
  <li>
    <p>Si le FSI ne possède pas d’identificateur par pair existant pour
l’utilisateur avec la PC requérante, il n’y a donc rien à « collecter », de
sorte que la plateforme d’acceptation crée un nouvel identificateur pour
l’utilisateur avec la PC requérante, et cet identificateur est utilisé pour
toutes les connexions futures.</p>
  </li>
</ol>

<h2 id="détails-techniques">Détails techniques</h2>

<p>Lors de l’envoi d’une deuxième demande d’authentification au FSI pour le compte
ou la partie de confiance, la plateforme d’acceptation utilise l’élément
<code class="language-plaintext highlighter-rouge">&lt;NameIDPolicy&gt;</code> du message SAML <code class="language-plaintext highlighter-rouge">&lt;AuthnRequest&gt;</code>. Plus précisément, il utilise les
deux attributs suivants de l’élément <code class="language-plaintext highlighter-rouge">&lt;NameIDPolicy&gt;</code> :</p>

<ul>
  <li>
    <p>La valeur de l’attribut <code class="language-plaintext highlighter-rouge">SPNameQualifier</code> est renseignée avec l’entité de
l’ancien ID SAML de la partie de confiance requérante, pour indiquer que la
plateforme d’acceptation demande l’identificateur par paire de PC au lieu du
sien.</p>
  </li>
  <li>
    <p>La valeur de l’attribut <code class="language-plaintext highlighter-rouge">AllowCreate</code> est définie sur <code class="language-plaintext highlighter-rouge">"false"</code>, pour indiquer
au FSI qu’il ne doit pas créer un nouvel identificateur par paire pour la PC
si celui-ci n’en a pas déjà un.</p>
  </li>
</ul>

<p>Voici un exemple d’une demande d’authentification émise par la plateforme
d’acceptation en son nom propre :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;samlp:AuthnRequest</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span> <span class="na">ID=</span><span class="s">"_f8e30829f6f60061c46e"</span>
                    <span class="na">Version=</span><span class="s">"2.0"</span> <span class="na">IssueInstant=</span><span class="s">"2021-05-05T17:17:02.583Z"</span>
                    <span class="na">ProtocolBinding=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"</span>
                    <span class="na">Destination=</span><span class="s">"https://clegc-gckey.gc.ca/j/SSORedirect/metaAlias/GCKey/idp"</span>
                    <span class="na">AssertionConsumerServiceURL=</span><span class="s">"https://auth.id.canada.ca/passport/auth/saml/gckey/callback"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;saml:Issuer</span> <span class="na">xmlns:saml=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:assertion"</span><span class="nt">&gt;</span>
      https://auth.id.canada.ca
   <span class="nt">&lt;/saml:Issuer&gt;</span>
   <span class="nt">&lt;samlp:NameIDPolicy</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span>
                       <span class="na">Format=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"</span>
                       <span class="na">AllowCreate=</span><span class="s">"true"</span>
                       <span class="na">SPNameQualifier=</span><span class="s">"https://auth.id.canada.ca"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;samlp:RequestedAuthnContext</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span> <span class="na">Comparison=</span><span class="s">"exact"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;saml:AuthnContextClassRef</span> <span class="na">xmlns:saml=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:assertion"</span><span class="nt">&gt;</span>
         urn:gc-ca:cyber-auth:assurance:loa2
      <span class="nt">&lt;/saml:AuthnContextClassRef&gt;</span>
   <span class="nt">&lt;/samlp:RequestedAuthnContext&gt;</span>
<span class="nt">&lt;/samlp:AuthnRequest&gt;</span>
</code></pre></div></div>

<p>Voici un exemple d’une demande d’authentification émise par la plateforme
d’acceptation en nom de la partie de confiance :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;samlp:AuthnRequest</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span> <span class="na">ID=</span><span class="s">"_f8e30829f6f60061c46f"</span>
                    <span class="na">Version=</span><span class="s">"2.0"</span> <span class="na">IssueInstant=</span><span class="s">"2021-05-05T17:20:02.583Z"</span>
                    <span class="na">ProtocolBinding=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"</span>
                    <span class="na">Destination=</span><span class="s">"https://clegc-gckey.gc.ca/j/SSORedirect/metaAlias/GCKey/idp"</span>
                    <span class="na">AssertionConsumerServiceURL=</span><span class="s">"https://auth.id.canada.ca/passport/auth/saml/gckey/callback"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;saml:Issuer</span> <span class="na">xmlns:saml=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:assertion"</span><span class="nt">&gt;</span>
      https://auth.id.canada.ca
   <span class="nt">&lt;/saml:Issuer&gt;</span>
   <span class="nt">&lt;samlp:NameIDPolicy</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span>
                       <span class="na">Format=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"</span>
                       <span class="na">AllowCreate=</span><span class="s">"false"</span>
                       <span class="na">SPNameQualifier=</span><span class="s">"https://relyingparty.department.gc.ca"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;samlp:RequestedAuthnContext</span> <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span> <span class="na">Comparison=</span><span class="s">"exact"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;saml:AuthnContextClassRef</span> <span class="na">xmlns:saml=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:assertion"</span><span class="nt">&gt;</span>
         urn:gc-ca:cyber-auth:assurance:loa2
      <span class="nt">&lt;/saml:AuthnContextClassRef&gt;</span>
   <span class="nt">&lt;/samlp:RequestedAuthnContext&gt;</span>
<span class="nt">&lt;/samlp:AuthnRequest&gt;</span>
</code></pre></div></div>

<h2 id="foire-aux-questions">Foire aux questions</h2>

<h3 id="qà-quoi-ressemble-lexpérience-de-lutilisateur-doit-il-saisir-son-mot-de-passe-deux-fois">QÀ quoi ressemble l’expérience de l’utilisateur? Doit-il saisir son mot de passe deux fois?</h3>

<p>Ce processus tire parti des fonctionnalités d’authentification unique inhérentes
à SAML, de sorte que l’utilisateur n’aura pas à s’authentifier plus d’une fois,
si ce n’est du tout :</p>

<ul>
  <li>Si l’utilisateur n’est pas encore connecté au FSI, ou s’il est connecté,
mais que la fenêtre connexion unique (20 minutes avec le FSI de la FJGC) a
expiré, il sera invité à s’authentifier après la première demande
d’authentification SAML. Une fois qu’ils se sont connectés avec succès au FSI,
la plateforme d’acceptation envoie ensuite la deuxième demande
d’authentification, dont une partie plus tard, dans la fenêtre
d’authentification unique, de sorte qu’ils ne seront pas invités à se
connecter une deuxième fois.</li>
  <li>Dans le cas improbable où l’utilisateur est déjà connecté au FSI, mais que
la fenêtre d’authentification unique expire dans quelques secondes entre les
deux demandes d’authentification, alors la connexion unique s’appliquera à la
première demande, mais pas à la seconde. Encore une fois, l’utilisateur n’a
besoin de fournir ses informations d’identification qu’une seule fois.</li>
  <li>Si l’utilisateur est déjà connecté au FSI et que les deux demandes
d’authentification sont traitées dans la fenêtre de connexion unique, le FSI
n’invite pas l’utilisateur à saisir à nouveau ses informations
d’identification. La partie de confiance peut remplacer ce comportement en
spécifiant <code class="language-plaintext highlighter-rouge">prompt="login"</code> (pour OpenID Connect) ou <code class="language-plaintext highlighter-rouge">forceAuthn="true"</code> (dans
SAML) dans sa demande d’authentification pour se connecter au Canada, où la
plateforme d’acceptation spécifiera <code class="language-plaintext highlighter-rouge">forceAuthn="true"</code> sur sa première
demande au FSI, mais pas la seconde.</li>
</ul>

<h3 id="quadvient-il-si-lutilisateur-du-clavier-change-y-a-t-il-un-risque-que-la-plateforme-dacceptation-recueille-le-mauvais-identificateur-appartenant-à-la-mauvaise-personne">Qu’advient-il si l’utilisateur du clavier change? Y a-t-il un risque que la plateforme d’acceptation recueille le mauvais identificateur appartenant à la mauvaise personne?</h3>

<p>Ce scénario possible peut survenir dans les cas où plusieurs personnes partagent
le même appareil, et l’une d’elles a laissé l’appareil sans surveillance pendant
qu’elles étaient encore connectées au FSI. À titre d’exemple :</p>

<p>Prenons l’exemple de deux utilisateurs, Alice et Bob, qui ont tous deux accès au
même ordinateur partagé :</p>

<ol>
  <li>Alice se connecte à la partie de confiance de la FJGC en utilisant sa CléGC,
  mais s’éloigne ensuite de l’ordinateur sans se déconnecter.</li>
  <li>Bob s’assoit ensuite sur le même ordinateur et tente de se connecter à la
  partie de confiance Auntheti-Canada, quelques secondes seulement avant
  l’expiration de la fenêtre de 20 minutes de connexion unique d’Alice.</li>
  <li>La plateforme d’acceptation envoie la première demande d’authentification à
  CléGC et reçoit en retour l’identificateur par paire d’Alice.</li>
  <li>La fenêtre connexion unique d’Alice expire ensuite en quelques secondes avant
  que la plateforme d’acceptation envoie la deuxième demande d’authentification.
  CléGC demande à Bob d’entrer ses informations d’identification de CléGC, puis
  retourne l’identificateur par paire de Bob à la plateforme d’acceptation.</li>
  <li>La plateforme d’acceptation associe ensuite l’identificateur de la CléGC de
  Bob au profil d’utilisateur d’Alice.</li>
</ol>

<p>Afin d’éviter cela, la plateforme d’acceptation vérifie l’Index de session
(<code class="language-plaintext highlighter-rouge">SessionIndex</code>)des deux assertions SAML et s’assure qu’elles correspondent
avant d’accepter l’identificateur collecté.</p>

<h3 id="les-identificateurs-par-paires-saml-émis-par-un-fournisseur-didentité-sont-censés-être-propres-au-fournisseur-de-services-saml-pc-comment-authenti-canada-est-il-autorisé-à-obtenir-les-identificateurs-générés-pour-un-autre-fournisseur-de-services-saml">Les identificateurs par paires SAML émis par un fournisseur d’identité sont censés être propres au fournisseur de services SAML (PC). Comment Authenti-Canada est-il autorisé à obtenir les identificateurs générés pour un autre fournisseur de services SAML?</h3>

<p>Les spécifications SAML permettent l’existence <em>d’affiliations</em> : groupes d’un ou
de plusieurs fournisseurs de services qui partagent le même identificateur par
paire pour un utilisateur donné. Lorsqu’une partie de confiance se déconnecte de
la FJGC pour se connecter à Authenti-Canada, une nouvelle affiliation SAML est
définie, au moyen des métadonnées SAML, qui permettent à la plateforme
d’acceptation d’obtenir les identificateurs par paire qui ont été créés à
l’origine pour la PC.</p>

</main>


<footer role="contentinfo" id="wb-info">
  <nav role="navigation" class="container wb-navcurr">
    <h2 class="wb-inv">Au sujet du gouvernement</h2>
    <ul class="list-unstyled colcount-sm-2 colcount-md-3">
      <li><a href="mailto:SignIn-AuthentiCanada@tbs-sct.gc.ca">Contactez-nous</a></li>
      <li><a href="https://www.canada.ca/fr/gouvernement/min.html">Ministères et organismes</a></li>
      <li><a href="https://www.canada.ca/fr/gouvernement/fonctionpublique.html">Fonction publique et force militaire</a></li>
      <li><a href="https://www.canada.ca/fr/nouvelles.html">Nouvelles</a></li>
      <li><a href="https://www.canada.ca/fr/gouvernement/systeme/lois.html">Traités, lois et règlements</a></li>
      <li><a href="https://www.canada.ca/fr/transparence/rapports.html">Rapports à l'échelle du gouvernement</a></li>
      <li><a href="http://pm.gc.ca/fra">Premier ministre</a></li>
      <li><a href="https://www.canada.ca/fr/gouvernement/systeme.html">Comment le gouvernement fonctionne</a></li>
      <li><a href="http://ouvert.canada.ca/">Gouvernement ouvert</a></li>
    </ul>
  </nav>
  <div class="brand">
    <div class="container">
      <div class="row">
        <nav class="col-md-9 col-lg-10 ftr-urlt-lnk">
          <h2 class="wb-inv">À propos du site</h2>
          <ul>
            <li><a href="https://www.canada.ca/fr/sociaux.html">Médias sociaux</a></li>
            <li><a href="https://www.canada.ca/fr/mobile.html">Applications mobiles</a></li>
            <li><a href="https://www1.canada.ca/fr/nouveausite.html">À propos de Canada.ca</a></li>
            <li><a href="https://www.canada.ca/fr/transparence/avis.html">Avis</a></li>
            <li><a href="https://www.canada.ca/fr/transparence/confidentialite.html">Confidentialité</a></li>
          </ul>
        </nav>
        <div class="col-xs-6 visible-sm visible-xs tofpg">
          <a href="#wb-cont">Haut de la page <span class="glyphicon glyphicon-chevron-up"></span></a>
        </div>
        <div class="col-xs-6 col-md-3 col-lg-2 text-right">
          <object type="image/svg+xml" tabindex="-1" role="img" data="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/assets/wmms-blk.svg" aria-label="Symbole du gouvernement du Canada"></object>
        </div>
      </div>
    </div>
  </div>
</footer>


<!--[if gte IE 9 | !IE ]><!-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
<script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/js/wet-boew.min.js"></script>
<!--<![endif]-->
<!--[if lt IE 9]>
<script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/js/ie8-wet-boew2.min.js"></script>
<![endif]-->
<script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_31/js/theme.min.js"></script>

</body>

</html>
